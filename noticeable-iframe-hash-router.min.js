!function(n){if(!("onhashchange"in n.document.body)){var t=n.location,o=t.href,a=t.hash;setInterval(function(){var e=t.href,i=t.hash;i!=a&&"function"==typeof n.onhashchange&&(n.onhashchange({type:"hashchange",oldURL:o,newURL:e}),o=e,a=i)},n.noticeableSettings.iframe.pageChangeCheckInterval||100)}}(window),function(){function i(){if(l("Starting iframe handling"),function(){var e=window.noticeableSettings.iframe.selector,i=window.noticeableSettings.iframe.timelineUrl;if(l("Noticeable iframe settings",window.noticeableSettings.iframe),!e)return console.error("Missing iframe selector definition."),!1;if(!i)return console.error("Missing timeline URL definition."),!1;return!0}()){var a=document.querySelector(window.noticeableSettings.iframe.selector);a.onload=function(){a.style.visibility="visible"},a?(a.setAttribute("scrolling","no"),a.style.height=a.parentElement?a.parentElement.scrollHeight+"px":"900px",window.addEventListener("message",function(e){try{var i=JSON.parse(e.data)}catch(e){}var n,t,o;i&&("noticeable-timeline-location"===i.type?(l("Received new timeline location",i),t=window.noticeableSettings.iframe.timelineUrl,o="https://timeline.noticeable.io/",n=0===t.lastIndexOf(o,0)?function(e){var i=0;0===e.indexOf("/")&&(i=1);return-1<(i=e.indexOf("/",i))?e.substr(i+1):""}(i.path):i.path,window.location.hash&&window.location.hash.substr(1)===n?l("Skip location update event since new path is the same"):(l("Setting hash location to",n),window.location.hash=n||"")):"noticeable-timeline-dimensions"===i.type&&(l("New iframe dimensions received",i),a.style.height=i.height+"px"))},!1),window.noticeableSettings.iframe.singlePageApp&&(window.onhashchange=function(){l("Location change detected",window.location.href),e(window.noticeableSettings.iframe.selector,window.noticeableSettings.iframe.timelineUrl)}),e(window.noticeableSettings.iframe.selector,window.noticeableSettings.iframe.timelineUrl)):console.log("Iframe not found on the current page with selector",selector)}}function e(e,i){var n=document.querySelector(e);if(window.location.hash){var t=function(e){var i=e.split("?"),n=i[0]+window.location.hash.replace("#","/");1<i.length&&(n+="?"+i[1]);return n}(i);l("Updating timeline URL from hash",t),t!==n.src?(n.style.visibility="hidden",n.src=t):l("Not updating iframe since URL is the same")}else l("Updating timeline URL using root",i),n.style.visibility="hidden",n.src=i}function l(e,i){window.noticeableSettings.iframe&&window.noticeableSettings.iframe.debug&&(i?console.log("[DEBUG] "+e,i):console.log("[DEBUG] "+e))}window.noticeableSettings.iframe.singlePageApp=void 0===window.noticeableSettings.iframe.singlePageApp||null===window.noticeableSettings.iframe.singlePageApp||window.noticeableSettings.iframe.singlePageApp,"complete"===document.readyState||"interactive"===document.readyState?i():document.addEventListener("DOMContentLoaded",function(e){i()})}();